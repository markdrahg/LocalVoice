<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inbox - LocalVoice</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar (reused across pages) -->
    <aside class="sidebar">
      <div class="profile">
        <img id="profilePic" src="https://via.placeholder.com/80" alt="Profile" />
        <input type="file" id="uploadImage" accept="image/*" />
        <h2>Hello, [Username]</h2>
      </div>
      <nav class="nav-links">
        <a href="index.html"><i class="fas fa-chart-line"></i> Dashboard</a>
<a href="upload.html"><i class="fas fa-upload"></i> Upload</a>
<a href="inbox.html"><i class="fas fa-envelope"></i> Inbox</a>
<a href="profile.html"><i class="fas fa-user"></i> Profile</a>
<a href="recyclebin.html"><i class="fas fa-trash"></i> Recycle Bin</a>
<a href="logout.html"><i class="fas fa-sign-out-alt"></i> Logout</a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <h1>Inbox</h1>
      <div class="message-box">
        <div class="message">
          <h4>From: Good Samaritan</h4>
          <p class="msg-preview">We saw your post. Help is on the way!</p>
          <div class="read-more">This is the full message text with more details and support contact...</div>
          <button onclick="openReplyPopup('Good Samaritan')">Reply</button>
          <button onclick="deleteMessage(this)">Delete</button>
        </div>

        <div class="message">
          <h4>From: Assembly Officer</h4>
          <p class="msg-preview">Your concern has been forwarded...</p>
          <div class="read-more">The local assembly has received your complaint and will act promptly...</div>
          <button onclick="openReplyPopup('Assembly Officer')">Reply</button>
          <button onclick="deleteMessage(this)">Delete</button>
        </div>
      </div>
    </main>
  </div>

  <!-- Reply Popup -->
  <div id="reply-popup" class="popup">
    <div class="popup-content">
      <h3>Reply to <span id="reply-to"></span></h3>
      <textarea placeholder="Type your reply here..."></textarea>
      <div class="popup-buttons">
        <button onclick="sendReply()">Send</button>
        <button onclick="closeReplyPopup()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Logout Popup -->
  <div id="logout-popup" class="popup">
    <div class="popup-content">
      <p>Are you sure you want to logout?</p>
      <button onclick="confirmLogout()">YES</button>
      <button onclick="cancelLogout()">NO</button>
    </div>
  </div>

  <script>
    // Handle profile image
    const uploadInput = document.getElementById("uploadImage");
    const profilePic = document.getElementById("profilePic");
    uploadInput.addEventListener("change", function () {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          profilePic.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    });

    // Logout
    const logoutBtn = document.getElementById("logout-btn");
    const logoutPopup = document.getElementById("logout-popup");
    logoutBtn.addEventListener("click", function (e) {
      e.preventDefault();
      logoutPopup.style.display = "flex";
    });
    function confirmLogout() {
      window.location.href = "index.html";
    }
    function cancelLogout() {
      logoutPopup.style.display = "none";
    }

    // Delete message
    function deleteMessage(button) {
      const message = button.closest(".message");
      message.remove();
      alert("Message moved to Recycle Bin.");
    }

    // Reply popup
    function openReplyPopup(sender) {
      document.getElementById("reply-to").innerText = sender;
      document.getElementById("reply-popup").style.display = "flex";
    }
    function closeReplyPopup() {
      document.getElementById("reply-popup").style.display = "none";
    }
    function sendReply() {
      alert("Reply sent!");
      closeReplyPopup();
    }
  </script>
</body>
</html>
